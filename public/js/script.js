function clamp(h,t,e){return t>=h?t:h>=e?e:h}$(document).ready(function(){"use strict";$.getJSON("data/trivia.json",function(h){$.each(h,function(h,t){$("#carousel-trivia .carousel-inner").append($("<div class='item'>").append($("<div class='carousel-caption'>").append(["<h3>",t.judul,"</h3>"].join("")).append(["<p>",t.isi,"</p>"].join(""))))}),$("#carousel-trivia .carousel-inner > .item:first-child").addClass("active")}),$.getJSON("data/heatmap.json",function(h){$.each(h,function(h,t){for(var e=[],a=[],i=0;10>i;i++){a[i]=[];for(var c=0;10>c;c++)a[i][c]={analisis:0,campuran:0,teori:0}}$.each(t.data,function(h,t){-1==e.indexOf(t.materi)&&e.push(t.materi);var i=e.indexOf(t.materi),c=t.tahun-2009+("UAS"===t.ujian?5:0),l=t.soal.analisis,d=t.soal.campuran,n=t.soal.teori;a[i][c]=999==l||999==d||999==n?null:t.soal});var l=$("<tbody>");$.each(e,function(h,t){var e=$("<tr>").append("<td>"+t+"</td>");$.each(a[h],function(h,t){var a=$("<td>");if(null===t)a.addClass("heat-nil");else{var i=clamp(t.analisis,0,4),c=clamp(t.campuran,0,4),l=clamp(t.teori,0,4);if(a.addClass(["heat-",i,c,l].join("")),t.analisis+t.campuran+t.teori>0){var d=h>=5?"UAS":"UTS",n=2009+h-("UAS"===d?5:0);a.popover({container:"body",trigger:"hover",title:[d,n+"/"+(n+1)].join(" "),html:!0,content:"Analisis: <b class='color-a"+t.analisis+"'>"+t.analisis+"</b><br>Gabungan: <b class='color-c"+t.campuran+"'>"+t.campuran+"</b><br>Teori: <b class='color-t"+t.teori+"'>"+t.teori+"</b>"})}}e.append(a)}),l.append(e)}),$(".heatmap-list").append($("<li class='heatmap'>").append(["<h1>",t.kode," ","<small>",t.kuliah,"</small>","</h1>"].join("")).append($("<table>").append(["<thead>","<tr>","<th rowspan='2'>Materi</th>","<th colspan='5'>UTS</th>","<th colspan='5'>UAS</th>","</tr>","<tr>","<th>'09/'10</th>","<th>'10/'11</th>","<th>'11/'12</th>","<th>'12/'13</th>","<th>'13/'14</th>","<th>'09/'10</th>","<th>'10/'11</th>","<th>'11/'12</th>","<th>'12/'13</th>","<th>'13/'14</th>","</tr>","</thead>"].join("")).append(l)))})}),$("#if2120").change(function(h){this.checked?$(".heatmap-list > li:nth-child(1)").show(500):$(".heatmap-list > li:nth-child(1)").hide(500)}).change(),$("#if2121").change(function(h){this.checked?$(".heatmap-list > li:nth-child(2)").show(500):$(".heatmap-list > li:nth-child(2)").hide(500)}).change(),$("#if2122").change(function(h){this.checked?$(".heatmap-list > li:nth-child(3)").show(500):$(".heatmap-list > li:nth-child(3)").hide(500)}).change(),$("#if2130").change(function(h){this.checked?$(".heatmap-list > li:nth-child(4)").show(500):$(".heatmap-list > li:nth-child(4)").hide(500)}).change(),$("#if2211").change(function(h){this.checked?$(".heatmap-list > li:nth-child(5)").show(500):$(".heatmap-list > li:nth-child(5)").hide(500)}).change(),$("#if2220").change(function(h){this.checked?$(".heatmap-list > li:nth-child(6)").show(500):$(".heatmap-list > li:nth-child(6)").hide(500)}).change(),$("#if2230").change(function(h){this.checked?$(".heatmap-list > li:nth-child(7)").show(500):$(".heatmap-list > li:nth-child(7)").hide(500)}).change(),$("#if2240").change(function(h){this.checked?$(".heatmap-list > li:nth-child(8)").show(500):$(".heatmap-list > li:nth-child(8)").hide(500)}).change(),$("#if2250").change(function(h){this.checked?$(".heatmap-list > li:nth-child(9)").show(500):$(".heatmap-list > li:nth-child(9)").hide(500)}).change(),$("#if3170").change(function(h){this.checked?$(".heatmap-list > li:nth-child(10)").show(500):$(".heatmap-list > li:nth-child(10)").hide(500)}).change(),$("#tahun0").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(1)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(6)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(2)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(7)").toggleClass("hide-col",!this.checked)}).change(),$("#tahun1").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(2)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(7)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(3)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(8)").toggleClass("hide-col",!this.checked)}).change(),$("#tahun2").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(3)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(8)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(4)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(9)").toggleClass("hide-col",!this.checked)}).change(),$("#tahun3").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(4)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(9)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(5)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(10)").toggleClass("hide-col",!this.checked)}).change(),$("#tahun4").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(5)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(10)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(6)").toggleClass("hide-col",!this.checked),$(".heatmap tbody td:nth-child(11)").toggleClass("hide-col",!this.checked)}).change(),$("#uts").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(1)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(2)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(2)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(3)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(3)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(4)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(4)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(5)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(5)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(6)").toggleClass("hide-col",!this.checked),$("#datavis > div > div > div.col-xs-8 > div > li:nth-child(2) > table > thead > tr:nth-child(1) > th:nth-child(2)").toggleClass("hide-col",!this.checked)}).change(),$("#uas").change(function(h){$(".heatmap thead > tr:nth-child(2) > th:nth-child(6)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(7)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(7)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(8)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(8)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(9)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(9)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(10)").toggleClass("hide-col",!this.checked),$(".heatmap thead > tr:nth-child(2) > th:nth-child(10)").toggleClass("hide-ujian",!this.checked),$(".heatmap tbody td:nth-child(11)").toggleClass("hide-col",!this.checked),$("#datavis > div > div > div.col-xs-8 > div > li:nth-child(2) > table > thead > tr:nth-child(1) > th:nth-child(3)").toggleClass("hide-col",!this.checked)}).change(),$(".legend-toggle").click(function(){$(".legend").toggleClass("legend-closed")})});var chart=c3.generate({data:{x:"x",columns:[["x","IF2121","IF2122","IF2120","IF2130","IF2240","IF2250","IF2230","IF2220","IF2221","IF3170"],["Analisis",.96,1,.9865,.4483,.7429,.51,.4146,1,.9643,.6591],["Teori",.04,0,.0135,.5517,.2571,.49,.3902,0,.0357,.1136],["Gabungan",0,0,0,0,0,0,.1951,0,0,.2273]],type:"bar",colors:{Analisis:"#007fd6",Teori:"#d60000",Gabungan:"#b700d6"},groups:[["Analisis","Teori","Gabungan"]],labels:{format:{y:d3.format("%")}}},bar:{width:{ratio:.7}},axis:{x:{type:"categorized"},y:{max:.99,tick:{format:d3.format("%")}}}});